<!DOCTYPE html>
<html>
<head>
    <title>FloodBud</title>
    <script>
        function updateLastRefreshedTime() {
            var now = new Date();
            var formattedTime = now.toLocaleString();
            document.getElementById("lastRefreshedTime").textContent = formattedTime;
        }
    </script>
</head>
<body onload="updateLastRefreshedTime()">
    <h1>FloodBud</h1>
    <p>Last refreshed: <span id="lastRefreshedTime"></span></p>
    {% for device in devices %}
        <h2>Sensor {{ loop.index }}</h2>
        <table>
            <thead>
                <tr>
                    <th>Timestamp</th>
                    <th>Water Level</th>
                </tr>
            </thead>
            <tbody>
                {% for i in range(device.Timestamps|length) %}
                    <tr>
                        <td>{{ device.Timestamps[i] }}</td>
                        <td>{{ device.WaterLevels[i] }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endfor %}
</body>
</html>
